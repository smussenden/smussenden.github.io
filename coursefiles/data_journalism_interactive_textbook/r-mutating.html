<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Journalism with R and the Tidyverse - 15&nbsp; Mutating data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./r_visualizing_reporting.html" rel="next">
<link href="./r_aggregates_filters.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Mutating data</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Journalism with R and the Tidyverse</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-story.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Learn a new way to read</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./start-math.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Newsroom math</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./census_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Census Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Spreadsheets</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-refresher.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Spreadsheet Refresher</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-filter-sort.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Sorting and filtering to find stories</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-formulas.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Spreadsheet Formulas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-pivot.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Grouping with pivot tables</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xl-sheets_cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Cleaning data with Google Sheets</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-start.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Getting started with R and RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-load-analyze-visualize.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Loading and Analyzing Data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Using GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_aggregates_filters.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Mutuating, Aggregates, Filters</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-mutating.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Mutating data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_visualizing_reporting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Visualizing your data for reporting</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-join-bind.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Joins</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-data-cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Cleaning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-geographic-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Geographic data basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-geographic-analysis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Geographic data analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-tidycensus-api.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Intro to APIs: The Census</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-scraping.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Scraping data with Rvest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-math.html" class="sidebar-item-text sidebar-link">(APPENDIX) Appendix</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#using-mutate-to-clean-data" id="toc-using-mutate-to-clean-data" class="nav-link active" data-scroll-target="#using-mutate-to-clean-data"> <span class="header-section-number">15.0.1</span> Using mutate to clean data</a></li>
  <li><a href="#a-more-powerful-use" id="toc-a-more-powerful-use" class="nav-link" data-scroll-target="#a-more-powerful-use"> <span class="header-section-number">15.0.2</span> A more powerful use</a></li>
  <li><a href="#pre-lab-questions" id="toc-pre-lab-questions" class="nav-link" data-scroll-target="#pre-lab-questions"> <span class="header-section-number">16</span> Pre-Lab Questions:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Mutating data</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Often the data will prompt questions that lack immediate answers. We’re continuing to work with the Baltimore median income data and we want to know how incomes changed over time by census tract and the percentage change.</p>
<p>To do that in R, we can use <code>dplyr</code> and <code>mutate</code> to calculate new metrics in a new field using existing fields of data. That’s the essence of <code>mutate</code> - using the data you have to answer a new question.</p>
<p>So first we’ll import the tidyverse so we can work with it.</p>
<p>We’ll import a dataset of median household income in Baltimore for the 2010, 2016 and 2020 surveys. The data is in the data folder in this chapter’s pre-lab directory. We’ll use this to explore ways to create new information from existing data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"assets/data/baltcity_income_clean.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#working on this with your laptop, uncomment and use this code below</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#baltcity_income&lt;- read_csv("baltcity_income_clean.csv") %&gt;% </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  as.data.frame()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>One main question involves how the median income changed from 2010 to 2020. First, let’s add a column called <code>diff_2010_2020</code> to see how median income changed for each census tract. The code is pretty simple. Remember, with <code>summarize</code>, we used <code>n()</code> to count things. With <code>mutate</code>, we use very similar syntax to calculate a new value – a new column of data – using other values in our dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Census, Neighborhood, x2010, x2020) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Income =</span> (x2020<span class="sc">-</span>x2010))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Census                          Neighborhood  x2010  x2020 Diff_Income
1    101.00                                Canton  75938 128839       52901
2    102.00           Patterson Park North &amp; East  58409 130357       71948
3    103.00                                Canton  77841 151389       73548
4    104.00                                Canton  70313 114946       44633
5    105.00                           Fells Point  86157  98194       12037
6    201.00                           Fells Point  60439  95536       35097
7    202.00                           Fells Point  47131  86125       38994
8    203.00                           Fells Point  59236 101815       42579
9    301.00              Harbor East/Little Italy  21932  23083        1151
10   302.00              Harbor East/Little Italy  63885  98254       34369
11   401.00                   Downtown/Seton Hill  45948  62131       16183
12   402.00                   Downtown/Seton Hill  13229  43333       30104
13   601.00           Patterson Park North &amp; East  46822  56652        9830
14   602.00           Patterson Park North &amp; East  51403  70313       18910
15   603.00           Patterson Park North &amp; East  53813  84318       30505
16   604.00                   Oldtown/Middle East  35139  53472       18333
17   701.00                      Madison/East End  37701  45602        7901
18   702.00                      Madison/East End  35667  31379       -4288
19   703.00                      Madison/East End  15000  35000       20000
20   704.00                   Oldtown/Middle East  14527  27321       12794
21   801.01                         Belair-Edison  49688  65417       15729
22   801.02                         Belair-Edison  35594  30000       -5594
23   802.00                         Clifton-Berea  24200  38289       14089
24   803.01                         Clifton-Berea  32024  45446       13422
25   803.02                         Clifton-Berea  24423  41298       16875
26   804.00                         Clifton-Berea  23893  34567       10674
27   805.00                         Clifton-Berea  35223  28203       -7020
28   806.00                       Greenmount East  26726  35221        8495
29   807.00                       Greenmount East  20679  40885       20206
30   808.00                   Oldtown/Middle East  35532  48137       12605
31   901.00                        Greater Govans  36444  52988       16544
32   902.00                             Northwood  67500  82609       15109
33   903.00                         The Waverlies  43824  63523       19699
34   904.00                         The Waverlies  26490  30685        4195
35   905.00                         The Waverlies  36507  43727        7220
36   906.00                     Midway/Coldstream  36408  50048       13640
37   907.00                     Midway/Coldstream  27330  30964        3634
38   908.00                     Midway/Coldstream  35473  31250       -4223
39   909.00                       Greenmount East  19056  19524         468
40  1001.00                       Greenmount East  28929  30913        1984
41  1002.00                   Oldtown/Middle East   9862  19172        9310
42  1003.00                      Unassigned--Jail     NA     NA          NA
43  1101.00                               Midtown  38797  53407       14610
44  1102.00                               Midtown  32563  62703       30140
45  1201.00     North Baltimore/Guilford/Homeland  56205  72349       16144
46  1202.01       Greater Charles Village/Barclay  54000  81393       27393
47  1202.02       Greater Charles Village/Barclay  30179  36563        6384
48  1203.00       Greater Charles Village/Barclay  38281  55074       16793
49  1204.00       Greater Charles Village/Barclay  39375  50034       10659
50  1205.00                               Midtown  37500  55170       17670
51  1206.00       Greater Charles Village/Barclay  23488  36221       12733
52  1207.00  Medfield/Hampden/Woodberry/Remington  39730  61653       21923
53  1301.00             Penn North/Reservoir Hill  21271  25835        4564
54  1302.00             Penn North/Reservoir Hill  30255  57457       27202
55  1303.00             Penn North/Reservoir Hill  32273  43380       11107
56  1304.00             Penn North/Reservoir Hill  32500  30868       -1632
57  1306.00  Medfield/Hampden/Woodberry/Remington  53654  91635       37981
58  1307.00  Medfield/Hampden/Woodberry/Remington  48634  72648       24014
59  1308.03  Medfield/Hampden/Woodberry/Remington  51548  62188       10640
60  1308.04  Medfield/Hampden/Woodberry/Remington  48207  62054       13847
61  1308.05           Mount Washington/Coldspring  53984  53750        -234
62  1308.06  Medfield/Hampden/Woodberry/Remington  48750  95142       46392
63  1401.00                               Midtown  32917  57292       24375
64  1402.00                   Upton/Druid Heights  16213  23152        6939
65  1403.00                   Upton/Druid Heights  21607  41913       20306
66  1501.00       Sandtown-Winchester/Harlem Park  18097  26989        8892
67  1502.00       Sandtown-Winchester/Harlem Park  25224  40644       15420
68  1503.00                      Greater Rosemont  32289  35476        3187
69  1504.00                     Greater Mondawmin  32632  33702        1070
70  1505.00                     Greater Mondawmin  34609  33967        -642
71  1506.00                      Greater Rosemont  29631  31250        1619
72  1507.01                     Greater Mondawmin  38125  51944       13819
73  1507.02                     Greater Mondawmin  48942  50150        1208
74  1508.00                  Forest Park/Walbrook  37199  39337        2138
75  1509.00                  Forest Park/Walbrook  37440  51250       13810
76  1510.00                  Dorchester/Ashburton  35056  45870       10814
77  1511.00                  Dorchester/Ashburton  45649  58843       13194
78  1512.00                 Southern Park Heights  12386  22632       10246
79  1513.00                 Southern Park Heights  33579  33866         287
80  1601.00       Sandtown-Winchester/Harlem Park  19583  27969        8386
81  1602.00       Sandtown-Winchester/Harlem Park  25417  24848        -569
82  1603.00       Sandtown-Winchester/Harlem Park  22292  13963       -8329
83  1604.00       Sandtown-Winchester/Harlem Park  27813  23036       -4777
84  1605.00                      Greater Rosemont  24556  37819       13263
85  1606.00                      Greater Rosemont  27128  38482       11354
86  1607.00                      Greater Rosemont  29472  39959       10487
87  1608.01                     Edmondson Village  41549  53543       11994
88  1608.02                     Edmondson Village  29355  41932       12577
89  1701.00                   Downtown/Seton Hill  30197  35582        5385
90  1702.00                   Upton/Druid Heights   9412  13559        4147
91  1703.00                   Upton/Druid Heights  17892  18912        1020
92  1801.00 Poppleton/The Terraces/Hollins Market  18429     NA          NA
93  1802.00 Poppleton/The Terraces/Hollins Market  16585     NA          NA
94  1803.00 Poppleton/The Terraces/Hollins Market  37879  64125       26246
95  1901.00                   Southwest Baltimore  22893  24559        1666
96  1902.00                   Southwest Baltimore  43214  52738        9524
97  1903.00                   Southwest Baltimore  17237  14269       -2968
98  2001.00                   Southwest Baltimore  32214  38203        5989
99  2002.00                   Southwest Baltimore  30061  27740       -2321
100 2003.00                   Southwest Baltimore  19063  21953        2890
101 2004.00                   Southwest Baltimore  28324  31975        3651
102 2005.00                   Southwest Baltimore  30239  34306        4067
103 2006.00         Allendale/Irvington/S. Hilton  29813  39076        9263
104 2007.01         Allendale/Irvington/S. Hilton  34556  33592        -964
105 2007.02         Allendale/Irvington/S. Hilton  27305  43734       16429
106 2008.00         Allendale/Irvington/S. Hilton  32711  49875       17164
107 2101.00            Washington Village/Pigtown  48857  76368       27511
108 2102.00            Washington Village/Pigtown  46319  36661       -9658
109 2201.00             Inner Harbor/Federal Hill  59259  80305       21046
110 2301.00             Inner Harbor/Federal Hill  62222  98125       35903
111 2302.00             Inner Harbor/Federal Hill  80521 107344       26823
112 2303.00                       South Baltimore  53194  92841       39647
113 2401.00                       South Baltimore  87619 151659       64040
114 2402.00             Inner Harbor/Federal Hill  92500 133333       40833
115 2403.00             Inner Harbor/Federal Hill  89211 120729       31518
116 2404.00                       South Baltimore  72122 121685       49563
117 2501.01       Beechfield/Ten Hills/West Hills  52098  60463        8365
118 2501.02         Allendale/Irvington/S. Hilton  36960  53854       16894
119 2501.03              Morrell Park/Violetville  36957  36555        -402
120 2502.03                           Cherry Hill  29747  33902        4155
121 2502.04                           Cherry Hill  12384  14349        1965
122 2502.05        Westport/Mount Winans/Lakeland  47738  38779       -8959
123 2502.06              Morrell Park/Violetville  52674  66900       14226
124 2502.07                           Cherry Hill  23310  41518       18208
125 2503.01        Westport/Mount Winans/Lakeland  27414  24877       -2537
126 2503.03              Morrell Park/Violetville  42007  40230       -1777
127 2504.01     Brooklyn/Curtis Bay/Hawkins Point  34401  32019       -2382
128 2504.02     Brooklyn/Curtis Bay/Hawkins Point  31250  37059        5809
129 2505.00     Brooklyn/Curtis Bay/Hawkins Point  32738  30526       -2212
130 2506.00     Brooklyn/Curtis Bay/Hawkins Point     NA     NA          NA
131 2601.01                     Cedonia/Frankford  46789  68983       22194
132 2601.02                     Cedonia/Frankford  48783  60313       11530
133 2602.01                     Cedonia/Frankford  33936  44093       10157
134 2602.02                     Cedonia/Frankford  31241  39282        8041
135 2602.03                     Cedonia/Frankford  32615  46250       13635
136 2603.01                         Belair-Edison  42347  52117        9770
137 2603.02                         Belair-Edison  42727  50000        7273
138 2603.03                   Claremont/Armistead  30192     NA          NA
139 2604.01                   Claremont/Armistead  31392  48661       17269
140 2604.02                   Claremont/Armistead  42938  39000       -3938
141 2604.03                   Claremont/Armistead  32373  35282        2909
142 2604.04         Orangeville/East Highlandtown  35708  54375       18667
143 2605.01         Orangeville/East Highlandtown  42298  64706       22408
144 2606.04                          Southeastern  20710  21977        1267
145 2606.05                          Southeastern  33545  44794       11249
146 2607.00         Orangeville/East Highlandtown  36901  80000       43099
147 2608.00                          Highlandtown  35200  48850       13650
148 2609.00                          Highlandtown  68571 107438       38867
149 2610.00           Patterson Park North &amp; East  36343  60893       24550
150 2611.00                          Highlandtown  83207 130769       47562
151 2701.01                            Lauraville  57326  80875       23549
152 2701.02                            Lauraville  54250  58020        3770
153 2702.00                            Lauraville  60128  80788       20660
154 2703.01                            Lauraville  54623  80655       26032
155 2703.02                            Lauraville  68088  63929       -4159
156 2704.01                              Hamilton  51641  64620       12979
157 2704.02                              Hamilton  53125  84556       31431
158 2705.01                      Harford/Echodale  59516  66604        7088
159 2705.02                              Hamilton  53493  71694       18201
160 2706.00                      Harford/Echodale  66914  67625         711
161 2707.01                      Harford/Echodale  28618  37591        8973
162 2707.02                      Harford/Echodale  39205  56963       17758
163 2707.03                      Harford/Echodale  63521  88750       25229
164 2708.01                            Loch Raven  51415  58995        7580
165 2708.02                            Loch Raven  46181  55753        9572
166 2708.03                            Loch Raven  42234  52272       10038
167 2708.04             Chinquapin Park/Belvedere  41094  59583       18489
168 2708.05             Chinquapin Park/Belvedere  46875  59763       12888
169 2709.01                             Northwood  51023  47260       -3763
170 2709.02                             Northwood  48555  58269        9714
171 2709.03                             Northwood  54607  52083       -2524
172 2710.01                        Greater Govans  33203  35822        2619
173 2710.02                        Greater Govans  38500  40281        1781
174 2711.01     North Baltimore/Guilford/Homeland  42994  55859       12865
175 2711.02     North Baltimore/Guilford/Homeland  99300 199531      100231
176 2712.00     North Baltimore/Guilford/Homeland 133548 195353       61805
177 2713.00       Greater Roland Park/Poplar Hill 111250 155605       44355
178 2714.00       Greater Roland Park/Poplar Hill  97891 151146       53255
179 2715.01           Mount Washington/Coldspring  88929 109688       20759
180 2715.03       Greater Roland Park/Poplar Hill  79861  62500      -17361
181 2716.00                 Southern Park Heights  43265  34832       -8433
182 2717.00             Pimlico/Arlington/Hilltop  29069  36484        7415
183 2718.01             Pimlico/Arlington/Hilltop  24802  25278         476
184 2718.02             Pimlico/Arlington/Hilltop  31392  40256        8864
185 2719.00                        Glen-Fallstaff  52308  54866        2558
186 2720.03               Cross-Country/Cheswolde  70942  57543      -13399
187 2720.04               Cross-Country/Cheswolde  49567  66148       16581
188 2720.05               Cross-Country/Cheswolde  49757  72500       22743
189 2720.06                        Glen-Fallstaff  24859  34019        9160
190 2720.07                        Glen-Fallstaff  35903  41728        5825
191 2801.01                        Glen-Fallstaff  46576  47610        1034
192 2801.02            Howard Park/West Arlington  33938  43618        9680
193 2802.00            Howard Park/West Arlington  45047  56458       11411
194 2803.01              Dickeyville/Franklintown  33707  47366       13659
195 2803.02                  Forest Park/Walbrook  33864  56004       22140
196 2804.01       Beechfield/Ten Hills/West Hills  44954  47192        2238
197 2804.02                     Edmondson Village  52784  41179      -11605
198 2804.03       Beechfield/Ten Hills/West Hills  51435  57582        6147
199 2804.04         Allendale/Irvington/S. Hilton  43779  40946       -2833
200 2805.00                   Oldtown/Middle East  11278  14304        3026</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baltcity_income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Neighborhood x2010  x2016  x2020 Census       GEOID
1                      Canton 75938 100985 128839    101 24510010100
2 Patterson Park North &amp; East 58409  96171 130357    102 24510010200
3                      Canton 77841 116875 151389    103 24510010300
4                      Canton 70313  97153 114946    104 24510010400
5                 Fells Point 86157  85986  98194    105 24510010500
6                 Fells Point 60439  79063  95536    201 24510020100</code></pre>
</div>
</div>
<p>Now we’ve got our <code>Diff_Income</code> column. Let’s provide some context and use a percentage change calculation to compare the gains. We’ll add a new column, <code>Diff_Pct_2020</code>. Remember the percentage change calculation is (New-Old)/Old</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Census, Neighborhood, x2010, x2020) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Income =</span> (x2020<span class="sc">-</span>x2010)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Pct_2020 =</span> (x2020<span class="sc">-</span>x2010)<span class="sc">/</span>x2010)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Census                          Neighborhood  x2010  x2020 Diff_Income
1    101.00                                Canton  75938 128839       52901
2    102.00           Patterson Park North &amp; East  58409 130357       71948
3    103.00                                Canton  77841 151389       73548
4    104.00                                Canton  70313 114946       44633
5    105.00                           Fells Point  86157  98194       12037
6    201.00                           Fells Point  60439  95536       35097
7    202.00                           Fells Point  47131  86125       38994
8    203.00                           Fells Point  59236 101815       42579
9    301.00              Harbor East/Little Italy  21932  23083        1151
10   302.00              Harbor East/Little Italy  63885  98254       34369
11   401.00                   Downtown/Seton Hill  45948  62131       16183
12   402.00                   Downtown/Seton Hill  13229  43333       30104
13   601.00           Patterson Park North &amp; East  46822  56652        9830
14   602.00           Patterson Park North &amp; East  51403  70313       18910
15   603.00           Patterson Park North &amp; East  53813  84318       30505
16   604.00                   Oldtown/Middle East  35139  53472       18333
17   701.00                      Madison/East End  37701  45602        7901
18   702.00                      Madison/East End  35667  31379       -4288
19   703.00                      Madison/East End  15000  35000       20000
20   704.00                   Oldtown/Middle East  14527  27321       12794
21   801.01                         Belair-Edison  49688  65417       15729
22   801.02                         Belair-Edison  35594  30000       -5594
23   802.00                         Clifton-Berea  24200  38289       14089
24   803.01                         Clifton-Berea  32024  45446       13422
25   803.02                         Clifton-Berea  24423  41298       16875
26   804.00                         Clifton-Berea  23893  34567       10674
27   805.00                         Clifton-Berea  35223  28203       -7020
28   806.00                       Greenmount East  26726  35221        8495
29   807.00                       Greenmount East  20679  40885       20206
30   808.00                   Oldtown/Middle East  35532  48137       12605
31   901.00                        Greater Govans  36444  52988       16544
32   902.00                             Northwood  67500  82609       15109
33   903.00                         The Waverlies  43824  63523       19699
34   904.00                         The Waverlies  26490  30685        4195
35   905.00                         The Waverlies  36507  43727        7220
36   906.00                     Midway/Coldstream  36408  50048       13640
37   907.00                     Midway/Coldstream  27330  30964        3634
38   908.00                     Midway/Coldstream  35473  31250       -4223
39   909.00                       Greenmount East  19056  19524         468
40  1001.00                       Greenmount East  28929  30913        1984
41  1002.00                   Oldtown/Middle East   9862  19172        9310
42  1003.00                      Unassigned--Jail     NA     NA          NA
43  1101.00                               Midtown  38797  53407       14610
44  1102.00                               Midtown  32563  62703       30140
45  1201.00     North Baltimore/Guilford/Homeland  56205  72349       16144
46  1202.01       Greater Charles Village/Barclay  54000  81393       27393
47  1202.02       Greater Charles Village/Barclay  30179  36563        6384
48  1203.00       Greater Charles Village/Barclay  38281  55074       16793
49  1204.00       Greater Charles Village/Barclay  39375  50034       10659
50  1205.00                               Midtown  37500  55170       17670
51  1206.00       Greater Charles Village/Barclay  23488  36221       12733
52  1207.00  Medfield/Hampden/Woodberry/Remington  39730  61653       21923
53  1301.00             Penn North/Reservoir Hill  21271  25835        4564
54  1302.00             Penn North/Reservoir Hill  30255  57457       27202
55  1303.00             Penn North/Reservoir Hill  32273  43380       11107
56  1304.00             Penn North/Reservoir Hill  32500  30868       -1632
57  1306.00  Medfield/Hampden/Woodberry/Remington  53654  91635       37981
58  1307.00  Medfield/Hampden/Woodberry/Remington  48634  72648       24014
59  1308.03  Medfield/Hampden/Woodberry/Remington  51548  62188       10640
60  1308.04  Medfield/Hampden/Woodberry/Remington  48207  62054       13847
61  1308.05           Mount Washington/Coldspring  53984  53750        -234
62  1308.06  Medfield/Hampden/Woodberry/Remington  48750  95142       46392
63  1401.00                               Midtown  32917  57292       24375
64  1402.00                   Upton/Druid Heights  16213  23152        6939
65  1403.00                   Upton/Druid Heights  21607  41913       20306
66  1501.00       Sandtown-Winchester/Harlem Park  18097  26989        8892
67  1502.00       Sandtown-Winchester/Harlem Park  25224  40644       15420
68  1503.00                      Greater Rosemont  32289  35476        3187
69  1504.00                     Greater Mondawmin  32632  33702        1070
70  1505.00                     Greater Mondawmin  34609  33967        -642
71  1506.00                      Greater Rosemont  29631  31250        1619
72  1507.01                     Greater Mondawmin  38125  51944       13819
73  1507.02                     Greater Mondawmin  48942  50150        1208
74  1508.00                  Forest Park/Walbrook  37199  39337        2138
75  1509.00                  Forest Park/Walbrook  37440  51250       13810
76  1510.00                  Dorchester/Ashburton  35056  45870       10814
77  1511.00                  Dorchester/Ashburton  45649  58843       13194
78  1512.00                 Southern Park Heights  12386  22632       10246
79  1513.00                 Southern Park Heights  33579  33866         287
80  1601.00       Sandtown-Winchester/Harlem Park  19583  27969        8386
81  1602.00       Sandtown-Winchester/Harlem Park  25417  24848        -569
82  1603.00       Sandtown-Winchester/Harlem Park  22292  13963       -8329
83  1604.00       Sandtown-Winchester/Harlem Park  27813  23036       -4777
84  1605.00                      Greater Rosemont  24556  37819       13263
85  1606.00                      Greater Rosemont  27128  38482       11354
86  1607.00                      Greater Rosemont  29472  39959       10487
87  1608.01                     Edmondson Village  41549  53543       11994
88  1608.02                     Edmondson Village  29355  41932       12577
89  1701.00                   Downtown/Seton Hill  30197  35582        5385
90  1702.00                   Upton/Druid Heights   9412  13559        4147
91  1703.00                   Upton/Druid Heights  17892  18912        1020
92  1801.00 Poppleton/The Terraces/Hollins Market  18429     NA          NA
93  1802.00 Poppleton/The Terraces/Hollins Market  16585     NA          NA
94  1803.00 Poppleton/The Terraces/Hollins Market  37879  64125       26246
95  1901.00                   Southwest Baltimore  22893  24559        1666
96  1902.00                   Southwest Baltimore  43214  52738        9524
97  1903.00                   Southwest Baltimore  17237  14269       -2968
98  2001.00                   Southwest Baltimore  32214  38203        5989
99  2002.00                   Southwest Baltimore  30061  27740       -2321
100 2003.00                   Southwest Baltimore  19063  21953        2890
101 2004.00                   Southwest Baltimore  28324  31975        3651
102 2005.00                   Southwest Baltimore  30239  34306        4067
103 2006.00         Allendale/Irvington/S. Hilton  29813  39076        9263
104 2007.01         Allendale/Irvington/S. Hilton  34556  33592        -964
105 2007.02         Allendale/Irvington/S. Hilton  27305  43734       16429
106 2008.00         Allendale/Irvington/S. Hilton  32711  49875       17164
107 2101.00            Washington Village/Pigtown  48857  76368       27511
108 2102.00            Washington Village/Pigtown  46319  36661       -9658
109 2201.00             Inner Harbor/Federal Hill  59259  80305       21046
110 2301.00             Inner Harbor/Federal Hill  62222  98125       35903
111 2302.00             Inner Harbor/Federal Hill  80521 107344       26823
112 2303.00                       South Baltimore  53194  92841       39647
113 2401.00                       South Baltimore  87619 151659       64040
114 2402.00             Inner Harbor/Federal Hill  92500 133333       40833
115 2403.00             Inner Harbor/Federal Hill  89211 120729       31518
116 2404.00                       South Baltimore  72122 121685       49563
117 2501.01       Beechfield/Ten Hills/West Hills  52098  60463        8365
118 2501.02         Allendale/Irvington/S. Hilton  36960  53854       16894
119 2501.03              Morrell Park/Violetville  36957  36555        -402
120 2502.03                           Cherry Hill  29747  33902        4155
121 2502.04                           Cherry Hill  12384  14349        1965
122 2502.05        Westport/Mount Winans/Lakeland  47738  38779       -8959
123 2502.06              Morrell Park/Violetville  52674  66900       14226
124 2502.07                           Cherry Hill  23310  41518       18208
125 2503.01        Westport/Mount Winans/Lakeland  27414  24877       -2537
126 2503.03              Morrell Park/Violetville  42007  40230       -1777
127 2504.01     Brooklyn/Curtis Bay/Hawkins Point  34401  32019       -2382
128 2504.02     Brooklyn/Curtis Bay/Hawkins Point  31250  37059        5809
129 2505.00     Brooklyn/Curtis Bay/Hawkins Point  32738  30526       -2212
130 2506.00     Brooklyn/Curtis Bay/Hawkins Point     NA     NA          NA
131 2601.01                     Cedonia/Frankford  46789  68983       22194
132 2601.02                     Cedonia/Frankford  48783  60313       11530
133 2602.01                     Cedonia/Frankford  33936  44093       10157
134 2602.02                     Cedonia/Frankford  31241  39282        8041
135 2602.03                     Cedonia/Frankford  32615  46250       13635
136 2603.01                         Belair-Edison  42347  52117        9770
137 2603.02                         Belair-Edison  42727  50000        7273
138 2603.03                   Claremont/Armistead  30192     NA          NA
139 2604.01                   Claremont/Armistead  31392  48661       17269
140 2604.02                   Claremont/Armistead  42938  39000       -3938
141 2604.03                   Claremont/Armistead  32373  35282        2909
142 2604.04         Orangeville/East Highlandtown  35708  54375       18667
143 2605.01         Orangeville/East Highlandtown  42298  64706       22408
144 2606.04                          Southeastern  20710  21977        1267
145 2606.05                          Southeastern  33545  44794       11249
146 2607.00         Orangeville/East Highlandtown  36901  80000       43099
147 2608.00                          Highlandtown  35200  48850       13650
148 2609.00                          Highlandtown  68571 107438       38867
149 2610.00           Patterson Park North &amp; East  36343  60893       24550
150 2611.00                          Highlandtown  83207 130769       47562
151 2701.01                            Lauraville  57326  80875       23549
152 2701.02                            Lauraville  54250  58020        3770
153 2702.00                            Lauraville  60128  80788       20660
154 2703.01                            Lauraville  54623  80655       26032
155 2703.02                            Lauraville  68088  63929       -4159
156 2704.01                              Hamilton  51641  64620       12979
157 2704.02                              Hamilton  53125  84556       31431
158 2705.01                      Harford/Echodale  59516  66604        7088
159 2705.02                              Hamilton  53493  71694       18201
160 2706.00                      Harford/Echodale  66914  67625         711
161 2707.01                      Harford/Echodale  28618  37591        8973
162 2707.02                      Harford/Echodale  39205  56963       17758
163 2707.03                      Harford/Echodale  63521  88750       25229
164 2708.01                            Loch Raven  51415  58995        7580
165 2708.02                            Loch Raven  46181  55753        9572
166 2708.03                            Loch Raven  42234  52272       10038
167 2708.04             Chinquapin Park/Belvedere  41094  59583       18489
168 2708.05             Chinquapin Park/Belvedere  46875  59763       12888
169 2709.01                             Northwood  51023  47260       -3763
170 2709.02                             Northwood  48555  58269        9714
171 2709.03                             Northwood  54607  52083       -2524
172 2710.01                        Greater Govans  33203  35822        2619
173 2710.02                        Greater Govans  38500  40281        1781
174 2711.01     North Baltimore/Guilford/Homeland  42994  55859       12865
175 2711.02     North Baltimore/Guilford/Homeland  99300 199531      100231
176 2712.00     North Baltimore/Guilford/Homeland 133548 195353       61805
177 2713.00       Greater Roland Park/Poplar Hill 111250 155605       44355
178 2714.00       Greater Roland Park/Poplar Hill  97891 151146       53255
179 2715.01           Mount Washington/Coldspring  88929 109688       20759
180 2715.03       Greater Roland Park/Poplar Hill  79861  62500      -17361
181 2716.00                 Southern Park Heights  43265  34832       -8433
182 2717.00             Pimlico/Arlington/Hilltop  29069  36484        7415
183 2718.01             Pimlico/Arlington/Hilltop  24802  25278         476
184 2718.02             Pimlico/Arlington/Hilltop  31392  40256        8864
185 2719.00                        Glen-Fallstaff  52308  54866        2558
186 2720.03               Cross-Country/Cheswolde  70942  57543      -13399
187 2720.04               Cross-Country/Cheswolde  49567  66148       16581
188 2720.05               Cross-Country/Cheswolde  49757  72500       22743
189 2720.06                        Glen-Fallstaff  24859  34019        9160
190 2720.07                        Glen-Fallstaff  35903  41728        5825
191 2801.01                        Glen-Fallstaff  46576  47610        1034
192 2801.02            Howard Park/West Arlington  33938  43618        9680
193 2802.00            Howard Park/West Arlington  45047  56458       11411
194 2803.01              Dickeyville/Franklintown  33707  47366       13659
195 2803.02                  Forest Park/Walbrook  33864  56004       22140
196 2804.01       Beechfield/Ten Hills/West Hills  44954  47192        2238
197 2804.02                     Edmondson Village  52784  41179      -11605
198 2804.03       Beechfield/Ten Hills/West Hills  51435  57582        6147
199 2804.04         Allendale/Irvington/S. Hilton  43779  40946       -2833
200 2805.00                   Oldtown/Middle East  11278  14304        3026
    Diff_Pct_2020
1     0.696634096
2     1.231796470
3     0.944849116
4     0.634775930
5     0.139710064
6     0.580701203
7     0.827353546
8     0.718802755
9     0.052480394
10    0.537982312
11    0.352202490
12    2.275606622
13    0.209944043
14    0.367877361
15    0.566870459
16    0.521727995
17    0.209570038
18   -0.120223175
19    1.333333333
20    0.880704894
21    0.316555305
22   -0.157161319
23    0.582190083
24    0.419123158
25    0.690947058
26    0.446741724
27   -0.199301593
28    0.317855272
29    0.977126554
30    0.354750647
31    0.453956756
32    0.223837037
33    0.449502556
34    0.158361646
35    0.197770291
36    0.374642936
37    0.132967435
38   -0.119048290
39    0.024559194
40    0.068581700
41    0.944027581
42             NA
43    0.376575508
44    0.925590394
45    0.287234232
46    0.507277778
47    0.211537824
48    0.438677151
49    0.270704762
50    0.471200000
51    0.542106608
52    0.551799648
53    0.214564430
54    0.899091059
55    0.344157655
56   -0.050215385
57    0.707887576
58    0.493769791
59    0.206409560
60    0.287240442
61   -0.004334618
62    0.951630769
63    0.740498830
64    0.427989885
65    0.939788032
66    0.491352158
67    0.611322550
68    0.098702344
69    0.032789899
70   -0.018550088
71    0.054638723
72    0.362465574
73    0.024682277
74    0.057474663
75    0.368856838
76    0.308477864
77    0.289031523
78    0.827224285
79    0.008547009
80    0.428228566
81   -0.022386592
82   -0.373631796
83   -0.171754216
84    0.540112396
85    0.418534356
86    0.355829262
87    0.288671207
88    0.428444899
89    0.178328973
90    0.440607735
91    0.057008719
92             NA
93             NA
94    0.692890520
95    0.072773337
96    0.220391540
97   -0.172187736
98    0.185912957
99   -0.077209674
100   0.151602581
101   0.128901285
102   0.134495188
103   0.310703384
104  -0.027896747
105   0.601684673
106   0.524716456
107   0.563092290
108  -0.208510546
109   0.355152804
110   0.577014561
111   0.333118069
112   0.745328420
113   0.730891702
114   0.441437838
115   0.353297239
116   0.687210560
117   0.160562786
118   0.457088745
119  -0.010877506
120   0.139677951
121   0.158672481
122  -0.187670200
123   0.270076318
124   0.781123981
125  -0.092543956
126  -0.042302473
127  -0.069242173
128   0.185888000
129  -0.067566742
130            NA
131   0.474342260
132   0.236352828
133   0.299298680
134   0.257386127
135   0.418059175
136   0.230712919
137   0.170220235
138            NA
139   0.550108308
140  -0.091713634
141   0.089858833
142   0.522768007
143   0.529765001
144   0.061178175
145   0.335340587
146   1.167962928
147   0.387784091
148   0.566813959
149   0.675508351
150   0.571610562
151   0.410790915
152   0.069493088
153   0.343600319
154   0.476575801
155  -0.061082716
156   0.251331307
157   0.591642353
158   0.119094025
159   0.340250126
160   0.010625579
161   0.313543923
162   0.452952430
163   0.397175737
164   0.147427793
165   0.207271389
166   0.237675806
167   0.449919696
168   0.274944000
169  -0.073751053
170   0.200061786
171  -0.046221180
172   0.078878415
173   0.046259740
174   0.299227799
175   1.009375629
176   0.462792404
177   0.398696629
178   0.544023455
179   0.233433413
180  -0.217390215
181  -0.194915058
182   0.255082734
183   0.019192001
184   0.282364934
185   0.048902654
186  -0.188872600
187   0.334516916
188   0.457081416
189   0.368478217
190   0.162242710
191   0.022200275
192   0.285226000
193   0.253313206
194   0.405227401
195   0.653791637
196   0.049784224
197  -0.219858290
198   0.119510061
199  -0.064711391
200   0.268309984</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baltcity_income) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Neighborhood x2010  x2016  x2020 Census       GEOID
1                      Canton 75938 100985 128839    101 24510010100
2 Patterson Park North &amp; East 58409  96171 130357    102 24510010200
3                      Canton 77841 116875 151389    103 24510010300
4                      Canton 70313  97153 114946    104 24510010400
5                 Fells Point 86157  85986  98194    105 24510010500
6                 Fells Point 60439  79063  95536    201 24510020100</code></pre>
</div>
</div>
<p>Look at <code>Diff_Pct_2020</code>. Do those numbers look like we expect them to? No.&nbsp;They’re a decimal expressed as a percentage. So let’s fix that by multiplying by 100. We’re also rounding the result to two digits from nine so it looks cleaner</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Census, Neighborhood, x2010, x2020) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Income =</span> (x2020<span class="sc">-</span>x2010)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Pct_2020 =</span> <span class="fu">round</span>((x2020<span class="sc">-</span>x2010)<span class="sc">/</span>x2010<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Census                          Neighborhood  x2010  x2020 Diff_Income
1    101.00                                Canton  75938 128839       52901
2    102.00           Patterson Park North &amp; East  58409 130357       71948
3    103.00                                Canton  77841 151389       73548
4    104.00                                Canton  70313 114946       44633
5    105.00                           Fells Point  86157  98194       12037
6    201.00                           Fells Point  60439  95536       35097
7    202.00                           Fells Point  47131  86125       38994
8    203.00                           Fells Point  59236 101815       42579
9    301.00              Harbor East/Little Italy  21932  23083        1151
10   302.00              Harbor East/Little Italy  63885  98254       34369
11   401.00                   Downtown/Seton Hill  45948  62131       16183
12   402.00                   Downtown/Seton Hill  13229  43333       30104
13   601.00           Patterson Park North &amp; East  46822  56652        9830
14   602.00           Patterson Park North &amp; East  51403  70313       18910
15   603.00           Patterson Park North &amp; East  53813  84318       30505
16   604.00                   Oldtown/Middle East  35139  53472       18333
17   701.00                      Madison/East End  37701  45602        7901
18   702.00                      Madison/East End  35667  31379       -4288
19   703.00                      Madison/East End  15000  35000       20000
20   704.00                   Oldtown/Middle East  14527  27321       12794
21   801.01                         Belair-Edison  49688  65417       15729
22   801.02                         Belair-Edison  35594  30000       -5594
23   802.00                         Clifton-Berea  24200  38289       14089
24   803.01                         Clifton-Berea  32024  45446       13422
25   803.02                         Clifton-Berea  24423  41298       16875
26   804.00                         Clifton-Berea  23893  34567       10674
27   805.00                         Clifton-Berea  35223  28203       -7020
28   806.00                       Greenmount East  26726  35221        8495
29   807.00                       Greenmount East  20679  40885       20206
30   808.00                   Oldtown/Middle East  35532  48137       12605
31   901.00                        Greater Govans  36444  52988       16544
32   902.00                             Northwood  67500  82609       15109
33   903.00                         The Waverlies  43824  63523       19699
34   904.00                         The Waverlies  26490  30685        4195
35   905.00                         The Waverlies  36507  43727        7220
36   906.00                     Midway/Coldstream  36408  50048       13640
37   907.00                     Midway/Coldstream  27330  30964        3634
38   908.00                     Midway/Coldstream  35473  31250       -4223
39   909.00                       Greenmount East  19056  19524         468
40  1001.00                       Greenmount East  28929  30913        1984
41  1002.00                   Oldtown/Middle East   9862  19172        9310
42  1003.00                      Unassigned--Jail     NA     NA          NA
43  1101.00                               Midtown  38797  53407       14610
44  1102.00                               Midtown  32563  62703       30140
45  1201.00     North Baltimore/Guilford/Homeland  56205  72349       16144
46  1202.01       Greater Charles Village/Barclay  54000  81393       27393
47  1202.02       Greater Charles Village/Barclay  30179  36563        6384
48  1203.00       Greater Charles Village/Barclay  38281  55074       16793
49  1204.00       Greater Charles Village/Barclay  39375  50034       10659
50  1205.00                               Midtown  37500  55170       17670
51  1206.00       Greater Charles Village/Barclay  23488  36221       12733
52  1207.00  Medfield/Hampden/Woodberry/Remington  39730  61653       21923
53  1301.00             Penn North/Reservoir Hill  21271  25835        4564
54  1302.00             Penn North/Reservoir Hill  30255  57457       27202
55  1303.00             Penn North/Reservoir Hill  32273  43380       11107
56  1304.00             Penn North/Reservoir Hill  32500  30868       -1632
57  1306.00  Medfield/Hampden/Woodberry/Remington  53654  91635       37981
58  1307.00  Medfield/Hampden/Woodberry/Remington  48634  72648       24014
59  1308.03  Medfield/Hampden/Woodberry/Remington  51548  62188       10640
60  1308.04  Medfield/Hampden/Woodberry/Remington  48207  62054       13847
61  1308.05           Mount Washington/Coldspring  53984  53750        -234
62  1308.06  Medfield/Hampden/Woodberry/Remington  48750  95142       46392
63  1401.00                               Midtown  32917  57292       24375
64  1402.00                   Upton/Druid Heights  16213  23152        6939
65  1403.00                   Upton/Druid Heights  21607  41913       20306
66  1501.00       Sandtown-Winchester/Harlem Park  18097  26989        8892
67  1502.00       Sandtown-Winchester/Harlem Park  25224  40644       15420
68  1503.00                      Greater Rosemont  32289  35476        3187
69  1504.00                     Greater Mondawmin  32632  33702        1070
70  1505.00                     Greater Mondawmin  34609  33967        -642
71  1506.00                      Greater Rosemont  29631  31250        1619
72  1507.01                     Greater Mondawmin  38125  51944       13819
73  1507.02                     Greater Mondawmin  48942  50150        1208
74  1508.00                  Forest Park/Walbrook  37199  39337        2138
75  1509.00                  Forest Park/Walbrook  37440  51250       13810
76  1510.00                  Dorchester/Ashburton  35056  45870       10814
77  1511.00                  Dorchester/Ashburton  45649  58843       13194
78  1512.00                 Southern Park Heights  12386  22632       10246
79  1513.00                 Southern Park Heights  33579  33866         287
80  1601.00       Sandtown-Winchester/Harlem Park  19583  27969        8386
81  1602.00       Sandtown-Winchester/Harlem Park  25417  24848        -569
82  1603.00       Sandtown-Winchester/Harlem Park  22292  13963       -8329
83  1604.00       Sandtown-Winchester/Harlem Park  27813  23036       -4777
84  1605.00                      Greater Rosemont  24556  37819       13263
85  1606.00                      Greater Rosemont  27128  38482       11354
86  1607.00                      Greater Rosemont  29472  39959       10487
87  1608.01                     Edmondson Village  41549  53543       11994
88  1608.02                     Edmondson Village  29355  41932       12577
89  1701.00                   Downtown/Seton Hill  30197  35582        5385
90  1702.00                   Upton/Druid Heights   9412  13559        4147
91  1703.00                   Upton/Druid Heights  17892  18912        1020
92  1801.00 Poppleton/The Terraces/Hollins Market  18429     NA          NA
93  1802.00 Poppleton/The Terraces/Hollins Market  16585     NA          NA
94  1803.00 Poppleton/The Terraces/Hollins Market  37879  64125       26246
95  1901.00                   Southwest Baltimore  22893  24559        1666
96  1902.00                   Southwest Baltimore  43214  52738        9524
97  1903.00                   Southwest Baltimore  17237  14269       -2968
98  2001.00                   Southwest Baltimore  32214  38203        5989
99  2002.00                   Southwest Baltimore  30061  27740       -2321
100 2003.00                   Southwest Baltimore  19063  21953        2890
101 2004.00                   Southwest Baltimore  28324  31975        3651
102 2005.00                   Southwest Baltimore  30239  34306        4067
103 2006.00         Allendale/Irvington/S. Hilton  29813  39076        9263
104 2007.01         Allendale/Irvington/S. Hilton  34556  33592        -964
105 2007.02         Allendale/Irvington/S. Hilton  27305  43734       16429
106 2008.00         Allendale/Irvington/S. Hilton  32711  49875       17164
107 2101.00            Washington Village/Pigtown  48857  76368       27511
108 2102.00            Washington Village/Pigtown  46319  36661       -9658
109 2201.00             Inner Harbor/Federal Hill  59259  80305       21046
110 2301.00             Inner Harbor/Federal Hill  62222  98125       35903
111 2302.00             Inner Harbor/Federal Hill  80521 107344       26823
112 2303.00                       South Baltimore  53194  92841       39647
113 2401.00                       South Baltimore  87619 151659       64040
114 2402.00             Inner Harbor/Federal Hill  92500 133333       40833
115 2403.00             Inner Harbor/Federal Hill  89211 120729       31518
116 2404.00                       South Baltimore  72122 121685       49563
117 2501.01       Beechfield/Ten Hills/West Hills  52098  60463        8365
118 2501.02         Allendale/Irvington/S. Hilton  36960  53854       16894
119 2501.03              Morrell Park/Violetville  36957  36555        -402
120 2502.03                           Cherry Hill  29747  33902        4155
121 2502.04                           Cherry Hill  12384  14349        1965
122 2502.05        Westport/Mount Winans/Lakeland  47738  38779       -8959
123 2502.06              Morrell Park/Violetville  52674  66900       14226
124 2502.07                           Cherry Hill  23310  41518       18208
125 2503.01        Westport/Mount Winans/Lakeland  27414  24877       -2537
126 2503.03              Morrell Park/Violetville  42007  40230       -1777
127 2504.01     Brooklyn/Curtis Bay/Hawkins Point  34401  32019       -2382
128 2504.02     Brooklyn/Curtis Bay/Hawkins Point  31250  37059        5809
129 2505.00     Brooklyn/Curtis Bay/Hawkins Point  32738  30526       -2212
130 2506.00     Brooklyn/Curtis Bay/Hawkins Point     NA     NA          NA
131 2601.01                     Cedonia/Frankford  46789  68983       22194
132 2601.02                     Cedonia/Frankford  48783  60313       11530
133 2602.01                     Cedonia/Frankford  33936  44093       10157
134 2602.02                     Cedonia/Frankford  31241  39282        8041
135 2602.03                     Cedonia/Frankford  32615  46250       13635
136 2603.01                         Belair-Edison  42347  52117        9770
137 2603.02                         Belair-Edison  42727  50000        7273
138 2603.03                   Claremont/Armistead  30192     NA          NA
139 2604.01                   Claremont/Armistead  31392  48661       17269
140 2604.02                   Claremont/Armistead  42938  39000       -3938
141 2604.03                   Claremont/Armistead  32373  35282        2909
142 2604.04         Orangeville/East Highlandtown  35708  54375       18667
143 2605.01         Orangeville/East Highlandtown  42298  64706       22408
144 2606.04                          Southeastern  20710  21977        1267
145 2606.05                          Southeastern  33545  44794       11249
146 2607.00         Orangeville/East Highlandtown  36901  80000       43099
147 2608.00                          Highlandtown  35200  48850       13650
148 2609.00                          Highlandtown  68571 107438       38867
149 2610.00           Patterson Park North &amp; East  36343  60893       24550
150 2611.00                          Highlandtown  83207 130769       47562
151 2701.01                            Lauraville  57326  80875       23549
152 2701.02                            Lauraville  54250  58020        3770
153 2702.00                            Lauraville  60128  80788       20660
154 2703.01                            Lauraville  54623  80655       26032
155 2703.02                            Lauraville  68088  63929       -4159
156 2704.01                              Hamilton  51641  64620       12979
157 2704.02                              Hamilton  53125  84556       31431
158 2705.01                      Harford/Echodale  59516  66604        7088
159 2705.02                              Hamilton  53493  71694       18201
160 2706.00                      Harford/Echodale  66914  67625         711
161 2707.01                      Harford/Echodale  28618  37591        8973
162 2707.02                      Harford/Echodale  39205  56963       17758
163 2707.03                      Harford/Echodale  63521  88750       25229
164 2708.01                            Loch Raven  51415  58995        7580
165 2708.02                            Loch Raven  46181  55753        9572
166 2708.03                            Loch Raven  42234  52272       10038
167 2708.04             Chinquapin Park/Belvedere  41094  59583       18489
168 2708.05             Chinquapin Park/Belvedere  46875  59763       12888
169 2709.01                             Northwood  51023  47260       -3763
170 2709.02                             Northwood  48555  58269        9714
171 2709.03                             Northwood  54607  52083       -2524
172 2710.01                        Greater Govans  33203  35822        2619
173 2710.02                        Greater Govans  38500  40281        1781
174 2711.01     North Baltimore/Guilford/Homeland  42994  55859       12865
175 2711.02     North Baltimore/Guilford/Homeland  99300 199531      100231
176 2712.00     North Baltimore/Guilford/Homeland 133548 195353       61805
177 2713.00       Greater Roland Park/Poplar Hill 111250 155605       44355
178 2714.00       Greater Roland Park/Poplar Hill  97891 151146       53255
179 2715.01           Mount Washington/Coldspring  88929 109688       20759
180 2715.03       Greater Roland Park/Poplar Hill  79861  62500      -17361
181 2716.00                 Southern Park Heights  43265  34832       -8433
182 2717.00             Pimlico/Arlington/Hilltop  29069  36484        7415
183 2718.01             Pimlico/Arlington/Hilltop  24802  25278         476
184 2718.02             Pimlico/Arlington/Hilltop  31392  40256        8864
185 2719.00                        Glen-Fallstaff  52308  54866        2558
186 2720.03               Cross-Country/Cheswolde  70942  57543      -13399
187 2720.04               Cross-Country/Cheswolde  49567  66148       16581
188 2720.05               Cross-Country/Cheswolde  49757  72500       22743
189 2720.06                        Glen-Fallstaff  24859  34019        9160
190 2720.07                        Glen-Fallstaff  35903  41728        5825
191 2801.01                        Glen-Fallstaff  46576  47610        1034
192 2801.02            Howard Park/West Arlington  33938  43618        9680
193 2802.00            Howard Park/West Arlington  45047  56458       11411
194 2803.01              Dickeyville/Franklintown  33707  47366       13659
195 2803.02                  Forest Park/Walbrook  33864  56004       22140
196 2804.01       Beechfield/Ten Hills/West Hills  44954  47192        2238
197 2804.02                     Edmondson Village  52784  41179      -11605
198 2804.03       Beechfield/Ten Hills/West Hills  51435  57582        6147
199 2804.04         Allendale/Irvington/S. Hilton  43779  40946       -2833
200 2805.00                   Oldtown/Middle East  11278  14304        3026
    Diff_Pct_2020
1           69.66
2          123.18
3           94.48
4           63.48
5           13.97
6           58.07
7           82.74
8           71.88
9            5.25
10          53.80
11          35.22
12         227.56
13          20.99
14          36.79
15          56.69
16          52.17
17          20.96
18         -12.02
19         133.33
20          88.07
21          31.66
22         -15.72
23          58.22
24          41.91
25          69.09
26          44.67
27         -19.93
28          31.79
29          97.71
30          35.48
31          45.40
32          22.38
33          44.95
34          15.84
35          19.78
36          37.46
37          13.30
38         -11.90
39           2.46
40           6.86
41          94.40
42             NA
43          37.66
44          92.56
45          28.72
46          50.73
47          21.15
48          43.87
49          27.07
50          47.12
51          54.21
52          55.18
53          21.46
54          89.91
55          34.42
56          -5.02
57          70.79
58          49.38
59          20.64
60          28.72
61          -0.43
62          95.16
63          74.05
64          42.80
65          93.98
66          49.14
67          61.13
68           9.87
69           3.28
70          -1.86
71           5.46
72          36.25
73           2.47
74           5.75
75          36.89
76          30.85
77          28.90
78          82.72
79           0.85
80          42.82
81          -2.24
82         -37.36
83         -17.18
84          54.01
85          41.85
86          35.58
87          28.87
88          42.84
89          17.83
90          44.06
91           5.70
92             NA
93             NA
94          69.29
95           7.28
96          22.04
97         -17.22
98          18.59
99          -7.72
100         15.16
101         12.89
102         13.45
103         31.07
104         -2.79
105         60.17
106         52.47
107         56.31
108        -20.85
109         35.52
110         57.70
111         33.31
112         74.53
113         73.09
114         44.14
115         35.33
116         68.72
117         16.06
118         45.71
119         -1.09
120         13.97
121         15.87
122        -18.77
123         27.01
124         78.11
125         -9.25
126         -4.23
127         -6.92
128         18.59
129         -6.76
130            NA
131         47.43
132         23.64
133         29.93
134         25.74
135         41.81
136         23.07
137         17.02
138            NA
139         55.01
140         -9.17
141          8.99
142         52.28
143         52.98
144          6.12
145         33.53
146        116.80
147         38.78
148         56.68
149         67.55
150         57.16
151         41.08
152          6.95
153         34.36
154         47.66
155         -6.11
156         25.13
157         59.16
158         11.91
159         34.03
160          1.06
161         31.35
162         45.30
163         39.72
164         14.74
165         20.73
166         23.77
167         44.99
168         27.49
169         -7.38
170         20.01
171         -4.62
172          7.89
173          4.63
174         29.92
175        100.94
176         46.28
177         39.87
178         54.40
179         23.34
180        -21.74
181        -19.49
182         25.51
183          1.92
184         28.24
185          4.89
186        -18.89
187         33.45
188         45.71
189         36.85
190         16.22
191          2.22
192         28.52
193         25.33
194         40.52
195         65.38
196          4.98
197        -21.99
198         11.95
199         -6.47
200         26.83</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baltcity_income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Neighborhood x2010  x2016  x2020 Census       GEOID
1                      Canton 75938 100985 128839    101 24510010100
2 Patterson Park North &amp; East 58409  96171 130357    102 24510010200
3                      Canton 77841 116875 151389    103 24510010300
4                      Canton 70313  97153 114946    104 24510010400
5                 Fells Point 86157  85986  98194    105 24510010500
6                 Fells Point 60439  79063  95536    201 24510020100</code></pre>
</div>
</div>
<p>Now, let’s fix the ordering with arrange and sort descending on the percentage change column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Census, Neighborhood, x2010, x2020) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Income =</span> (x2020<span class="sc">-</span>x2010)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Pct_2020 =</span> <span class="fu">round</span>((x2020<span class="sc">-</span>x2010)<span class="sc">/</span>x2010<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Diff_Pct_2020))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Census                          Neighborhood  x2010  x2020 Diff_Income
1    402.00                   Downtown/Seton Hill  13229  43333       30104
2    703.00                      Madison/East End  15000  35000       20000
3    102.00           Patterson Park North &amp; East  58409 130357       71948
4   2607.00         Orangeville/East Highlandtown  36901  80000       43099
5   2711.02     North Baltimore/Guilford/Homeland  99300 199531      100231
6    807.00                       Greenmount East  20679  40885       20206
7   1308.06  Medfield/Hampden/Woodberry/Remington  48750  95142       46392
8    103.00                                Canton  77841 151389       73548
9   1002.00                   Oldtown/Middle East   9862  19172        9310
10  1403.00                   Upton/Druid Heights  21607  41913       20306
11  1102.00                               Midtown  32563  62703       30140
12  1302.00             Penn North/Reservoir Hill  30255  57457       27202
13   704.00                   Oldtown/Middle East  14527  27321       12794
14   202.00                           Fells Point  47131  86125       38994
15  1512.00                 Southern Park Heights  12386  22632       10246
16  2502.07                           Cherry Hill  23310  41518       18208
17  2303.00                       South Baltimore  53194  92841       39647
18  1401.00                               Midtown  32917  57292       24375
19  2401.00                       South Baltimore  87619 151659       64040
20   203.00                           Fells Point  59236 101815       42579
21  1306.00  Medfield/Hampden/Woodberry/Remington  53654  91635       37981
22   101.00                                Canton  75938 128839       52901
23  1803.00 Poppleton/The Terraces/Hollins Market  37879  64125       26246
24   803.02                         Clifton-Berea  24423  41298       16875
25  2404.00                       South Baltimore  72122 121685       49563
26  2610.00           Patterson Park North &amp; East  36343  60893       24550
27  2803.02                  Forest Park/Walbrook  33864  56004       22140
28   104.00                                Canton  70313 114946       44633
29  1502.00       Sandtown-Winchester/Harlem Park  25224  40644       15420
30  2007.02         Allendale/Irvington/S. Hilton  27305  43734       16429
31  2704.02                              Hamilton  53125  84556       31431
32   802.00                         Clifton-Berea  24200  38289       14089
33   201.00                           Fells Point  60439  95536       35097
34  2301.00             Inner Harbor/Federal Hill  62222  98125       35903
35  2611.00                          Highlandtown  83207 130769       47562
36   603.00           Patterson Park North &amp; East  53813  84318       30505
37  2609.00                          Highlandtown  68571 107438       38867
38  2101.00            Washington Village/Pigtown  48857  76368       27511
39  1207.00  Medfield/Hampden/Woodberry/Remington  39730  61653       21923
40  2604.01                   Claremont/Armistead  31392  48661       17269
41  2714.00       Greater Roland Park/Poplar Hill  97891 151146       53255
42  1206.00       Greater Charles Village/Barclay  23488  36221       12733
43  1605.00                      Greater Rosemont  24556  37819       13263
44   302.00              Harbor East/Little Italy  63885  98254       34369
45  2605.01         Orangeville/East Highlandtown  42298  64706       22408
46  2008.00         Allendale/Irvington/S. Hilton  32711  49875       17164
47  2604.04         Orangeville/East Highlandtown  35708  54375       18667
48   604.00                   Oldtown/Middle East  35139  53472       18333
49  1202.01       Greater Charles Village/Barclay  54000  81393       27393
50  1307.00  Medfield/Hampden/Woodberry/Remington  48634  72648       24014
51  1501.00       Sandtown-Winchester/Harlem Park  18097  26989        8892
52  2703.01                            Lauraville  54623  80655       26032
53  2601.01                     Cedonia/Frankford  46789  68983       22194
54  1205.00                               Midtown  37500  55170       17670
55  2712.00     North Baltimore/Guilford/Homeland 133548 195353       61805
56  2501.02         Allendale/Irvington/S. Hilton  36960  53854       16894
57  2720.05               Cross-Country/Cheswolde  49757  72500       22743
58   901.00                        Greater Govans  36444  52988       16544
59  2707.02                      Harford/Echodale  39205  56963       17758
60  2708.04             Chinquapin Park/Belvedere  41094  59583       18489
61   903.00                         The Waverlies  43824  63523       19699
62   804.00                         Clifton-Berea  23893  34567       10674
63  2402.00             Inner Harbor/Federal Hill  92500 133333       40833
64  1702.00                   Upton/Druid Heights   9412  13559        4147
65  1203.00       Greater Charles Village/Barclay  38281  55074       16793
66  1608.02                     Edmondson Village  29355  41932       12577
67  1601.00       Sandtown-Winchester/Harlem Park  19583  27969        8386
68  1402.00                   Upton/Druid Heights  16213  23152        6939
69   803.01                         Clifton-Berea  32024  45446       13422
70  1606.00                      Greater Rosemont  27128  38482       11354
71  2602.03                     Cedonia/Frankford  32615  46250       13635
72  2701.01                            Lauraville  57326  80875       23549
73  2803.01              Dickeyville/Franklintown  33707  47366       13659
74  2713.00       Greater Roland Park/Poplar Hill 111250 155605       44355
75  2707.03                      Harford/Echodale  63521  88750       25229
76  2608.00                          Highlandtown  35200  48850       13650
77  1101.00                               Midtown  38797  53407       14610
78   906.00                     Midway/Coldstream  36408  50048       13640
79  1509.00                  Forest Park/Walbrook  37440  51250       13810
80  2720.06                        Glen-Fallstaff  24859  34019        9160
81   602.00           Patterson Park North &amp; East  51403  70313       18910
82  1507.01                     Greater Mondawmin  38125  51944       13819
83  1607.00                      Greater Rosemont  29472  39959       10487
84  2201.00             Inner Harbor/Federal Hill  59259  80305       21046
85   808.00                   Oldtown/Middle East  35532  48137       12605
86  2403.00             Inner Harbor/Federal Hill  89211 120729       31518
87   401.00                   Downtown/Seton Hill  45948  62131       16183
88  1303.00             Penn North/Reservoir Hill  32273  43380       11107
89  2702.00                            Lauraville  60128  80788       20660
90  2705.02                              Hamilton  53493  71694       18201
91  2606.05                          Southeastern  33545  44794       11249
92  2720.04               Cross-Country/Cheswolde  49567  66148       16581
93  2302.00             Inner Harbor/Federal Hill  80521 107344       26823
94   806.00                       Greenmount East  26726  35221        8495
95   801.01                         Belair-Edison  49688  65417       15729
96  2707.01                      Harford/Echodale  28618  37591        8973
97  2006.00         Allendale/Irvington/S. Hilton  29813  39076        9263
98  1510.00                  Dorchester/Ashburton  35056  45870       10814
99  2602.01                     Cedonia/Frankford  33936  44093       10157
100 2711.01     North Baltimore/Guilford/Homeland  42994  55859       12865
101 1511.00                  Dorchester/Ashburton  45649  58843       13194
102 1608.01                     Edmondson Village  41549  53543       11994
103 1201.00     North Baltimore/Guilford/Homeland  56205  72349       16144
104 1308.04  Medfield/Hampden/Woodberry/Remington  48207  62054       13847
105 2801.02            Howard Park/West Arlington  33938  43618        9680
106 2718.02             Pimlico/Arlington/Hilltop  31392  40256        8864
107 2708.05             Chinquapin Park/Belvedere  46875  59763       12888
108 1204.00       Greater Charles Village/Barclay  39375  50034       10659
109 2502.06              Morrell Park/Violetville  52674  66900       14226
110 2805.00                   Oldtown/Middle East  11278  14304        3026
111 2602.02                     Cedonia/Frankford  31241  39282        8041
112 2717.00             Pimlico/Arlington/Hilltop  29069  36484        7415
113 2802.00            Howard Park/West Arlington  45047  56458       11411
114 2704.01                              Hamilton  51641  64620       12979
115 2708.03                            Loch Raven  42234  52272       10038
116 2601.02                     Cedonia/Frankford  48783  60313       11530
117 2715.01           Mount Washington/Coldspring  88929 109688       20759
118 2603.01                         Belair-Edison  42347  52117        9770
119  902.00                             Northwood  67500  82609       15109
120 1902.00                   Southwest Baltimore  43214  52738        9524
121 1301.00             Penn North/Reservoir Hill  21271  25835        4564
122 1202.02       Greater Charles Village/Barclay  30179  36563        6384
123  601.00           Patterson Park North &amp; East  46822  56652        9830
124  701.00                      Madison/East End  37701  45602        7901
125 2708.02                            Loch Raven  46181  55753        9572
126 1308.03  Medfield/Hampden/Woodberry/Remington  51548  62188       10640
127 2709.02                             Northwood  48555  58269        9714
128  905.00                         The Waverlies  36507  43727        7220
129 2001.00                   Southwest Baltimore  32214  38203        5989
130 2504.02     Brooklyn/Curtis Bay/Hawkins Point  31250  37059        5809
131 1701.00                   Downtown/Seton Hill  30197  35582        5385
132 2603.02                         Belair-Edison  42727  50000        7273
133 2720.07                        Glen-Fallstaff  35903  41728        5825
134 2501.01       Beechfield/Ten Hills/West Hills  52098  60463        8365
135 2502.04                           Cherry Hill  12384  14349        1965
136  904.00                         The Waverlies  26490  30685        4195
137 2003.00                   Southwest Baltimore  19063  21953        2890
138 2708.01                            Loch Raven  51415  58995        7580
139  105.00                           Fells Point  86157  98194       12037
140 2502.03                           Cherry Hill  29747  33902        4155
141 2005.00                   Southwest Baltimore  30239  34306        4067
142  907.00                     Midway/Coldstream  27330  30964        3634
143 2004.00                   Southwest Baltimore  28324  31975        3651
144 2804.03       Beechfield/Ten Hills/West Hills  51435  57582        6147
145 2705.01                      Harford/Echodale  59516  66604        7088
146 1503.00                      Greater Rosemont  32289  35476        3187
147 2604.03                   Claremont/Armistead  32373  35282        2909
148 2710.01                        Greater Govans  33203  35822        2619
149 1901.00                   Southwest Baltimore  22893  24559        1666
150 2701.02                            Lauraville  54250  58020        3770
151 1001.00                       Greenmount East  28929  30913        1984
152 2606.04                          Southeastern  20710  21977        1267
153 1508.00                  Forest Park/Walbrook  37199  39337        2138
154 1703.00                   Upton/Druid Heights  17892  18912        1020
155 1506.00                      Greater Rosemont  29631  31250        1619
156  301.00              Harbor East/Little Italy  21932  23083        1151
157 2804.01       Beechfield/Ten Hills/West Hills  44954  47192        2238
158 2719.00                        Glen-Fallstaff  52308  54866        2558
159 2710.02                        Greater Govans  38500  40281        1781
160 1504.00                     Greater Mondawmin  32632  33702        1070
161 1507.02                     Greater Mondawmin  48942  50150        1208
162  909.00                       Greenmount East  19056  19524         468
163 2801.01                        Glen-Fallstaff  46576  47610        1034
164 2718.01             Pimlico/Arlington/Hilltop  24802  25278         476
165 2706.00                      Harford/Echodale  66914  67625         711
166 1513.00                 Southern Park Heights  33579  33866         287
167 1308.05           Mount Washington/Coldspring  53984  53750        -234
168 2501.03              Morrell Park/Violetville  36957  36555        -402
169 1505.00                     Greater Mondawmin  34609  33967        -642
170 1602.00       Sandtown-Winchester/Harlem Park  25417  24848        -569
171 2007.01         Allendale/Irvington/S. Hilton  34556  33592        -964
172 2503.03              Morrell Park/Violetville  42007  40230       -1777
173 2709.03                             Northwood  54607  52083       -2524
174 1304.00             Penn North/Reservoir Hill  32500  30868       -1632
175 2703.02                            Lauraville  68088  63929       -4159
176 2804.04         Allendale/Irvington/S. Hilton  43779  40946       -2833
177 2505.00     Brooklyn/Curtis Bay/Hawkins Point  32738  30526       -2212
178 2504.01     Brooklyn/Curtis Bay/Hawkins Point  34401  32019       -2382
179 2709.01                             Northwood  51023  47260       -3763
180 2002.00                   Southwest Baltimore  30061  27740       -2321
181 2604.02                   Claremont/Armistead  42938  39000       -3938
182 2503.01        Westport/Mount Winans/Lakeland  27414  24877       -2537
183  908.00                     Midway/Coldstream  35473  31250       -4223
184  702.00                      Madison/East End  35667  31379       -4288
185  801.02                         Belair-Edison  35594  30000       -5594
186 1604.00       Sandtown-Winchester/Harlem Park  27813  23036       -4777
187 1903.00                   Southwest Baltimore  17237  14269       -2968
188 2502.05        Westport/Mount Winans/Lakeland  47738  38779       -8959
189 2720.03               Cross-Country/Cheswolde  70942  57543      -13399
190 2716.00                 Southern Park Heights  43265  34832       -8433
191  805.00                         Clifton-Berea  35223  28203       -7020
192 2102.00            Washington Village/Pigtown  46319  36661       -9658
193 2715.03       Greater Roland Park/Poplar Hill  79861  62500      -17361
194 2804.02                     Edmondson Village  52784  41179      -11605
195 1603.00       Sandtown-Winchester/Harlem Park  22292  13963       -8329
196 1003.00                      Unassigned--Jail     NA     NA          NA
197 1801.00 Poppleton/The Terraces/Hollins Market  18429     NA          NA
198 1802.00 Poppleton/The Terraces/Hollins Market  16585     NA          NA
199 2506.00     Brooklyn/Curtis Bay/Hawkins Point     NA     NA          NA
200 2603.03                   Claremont/Armistead  30192     NA          NA
    Diff_Pct_2020
1          227.56
2          133.33
3          123.18
4          116.80
5          100.94
6           97.71
7           95.16
8           94.48
9           94.40
10          93.98
11          92.56
12          89.91
13          88.07
14          82.74
15          82.72
16          78.11
17          74.53
18          74.05
19          73.09
20          71.88
21          70.79
22          69.66
23          69.29
24          69.09
25          68.72
26          67.55
27          65.38
28          63.48
29          61.13
30          60.17
31          59.16
32          58.22
33          58.07
34          57.70
35          57.16
36          56.69
37          56.68
38          56.31
39          55.18
40          55.01
41          54.40
42          54.21
43          54.01
44          53.80
45          52.98
46          52.47
47          52.28
48          52.17
49          50.73
50          49.38
51          49.14
52          47.66
53          47.43
54          47.12
55          46.28
56          45.71
57          45.71
58          45.40
59          45.30
60          44.99
61          44.95
62          44.67
63          44.14
64          44.06
65          43.87
66          42.84
67          42.82
68          42.80
69          41.91
70          41.85
71          41.81
72          41.08
73          40.52
74          39.87
75          39.72
76          38.78
77          37.66
78          37.46
79          36.89
80          36.85
81          36.79
82          36.25
83          35.58
84          35.52
85          35.48
86          35.33
87          35.22
88          34.42
89          34.36
90          34.03
91          33.53
92          33.45
93          33.31
94          31.79
95          31.66
96          31.35
97          31.07
98          30.85
99          29.93
100         29.92
101         28.90
102         28.87
103         28.72
104         28.72
105         28.52
106         28.24
107         27.49
108         27.07
109         27.01
110         26.83
111         25.74
112         25.51
113         25.33
114         25.13
115         23.77
116         23.64
117         23.34
118         23.07
119         22.38
120         22.04
121         21.46
122         21.15
123         20.99
124         20.96
125         20.73
126         20.64
127         20.01
128         19.78
129         18.59
130         18.59
131         17.83
132         17.02
133         16.22
134         16.06
135         15.87
136         15.84
137         15.16
138         14.74
139         13.97
140         13.97
141         13.45
142         13.30
143         12.89
144         11.95
145         11.91
146          9.87
147          8.99
148          7.89
149          7.28
150          6.95
151          6.86
152          6.12
153          5.75
154          5.70
155          5.46
156          5.25
157          4.98
158          4.89
159          4.63
160          3.28
161          2.47
162          2.46
163          2.22
164          1.92
165          1.06
166          0.85
167         -0.43
168         -1.09
169         -1.86
170         -2.24
171         -2.79
172         -4.23
173         -4.62
174         -5.02
175         -6.11
176         -6.47
177         -6.76
178         -6.92
179         -7.38
180         -7.72
181         -9.17
182         -9.25
183        -11.90
184        -12.02
185        -15.72
186        -17.18
187        -17.22
188        -18.77
189        -18.89
190        -19.49
191        -19.93
192        -20.85
193        -21.74
194        -21.99
195        -37.36
196            NA
197            NA
198            NA
199            NA
200            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baltcity_income) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Neighborhood x2010  x2016  x2020 Census       GEOID
1                      Canton 75938 100985 128839    101 24510010100
2 Patterson Park North &amp; East 58409  96171 130357    102 24510010200
3                      Canton 77841 116875 151389    103 24510010300
4                      Canton 70313  97153 114946    104 24510010400
5                 Fells Point 86157  85986  98194    105 24510010500
6                 Fells Point 60439  79063  95536    201 24510020100</code></pre>
</div>
</div>
<p>So we know who the winners since the descending sort by <code>Diff_Pct_2020</code> shows us Census tracts by the highest percentage first. Now, which areas suffered the biggest declines in median income? We will copy the previous code and alter the arrange so it is ascending from the lowest value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>baltcity_income <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Census, Neighborhood, x2010, x2020) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Income =</span> (x2020<span class="sc">-</span>x2010)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Diff_Pct_2020 =</span> <span class="fu">round</span>((x2020<span class="sc">-</span>x2010)<span class="sc">/</span>x2010<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Diff_Pct_2020)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Census                          Neighborhood  x2010  x2020 Diff_Income
1   1603.00       Sandtown-Winchester/Harlem Park  22292  13963       -8329
2   2804.02                     Edmondson Village  52784  41179      -11605
3   2715.03       Greater Roland Park/Poplar Hill  79861  62500      -17361
4   2102.00            Washington Village/Pigtown  46319  36661       -9658
5    805.00                         Clifton-Berea  35223  28203       -7020
6   2716.00                 Southern Park Heights  43265  34832       -8433
7   2720.03               Cross-Country/Cheswolde  70942  57543      -13399
8   2502.05        Westport/Mount Winans/Lakeland  47738  38779       -8959
9   1903.00                   Southwest Baltimore  17237  14269       -2968
10  1604.00       Sandtown-Winchester/Harlem Park  27813  23036       -4777
11   801.02                         Belair-Edison  35594  30000       -5594
12   702.00                      Madison/East End  35667  31379       -4288
13   908.00                     Midway/Coldstream  35473  31250       -4223
14  2503.01        Westport/Mount Winans/Lakeland  27414  24877       -2537
15  2604.02                   Claremont/Armistead  42938  39000       -3938
16  2002.00                   Southwest Baltimore  30061  27740       -2321
17  2709.01                             Northwood  51023  47260       -3763
18  2504.01     Brooklyn/Curtis Bay/Hawkins Point  34401  32019       -2382
19  2505.00     Brooklyn/Curtis Bay/Hawkins Point  32738  30526       -2212
20  2804.04         Allendale/Irvington/S. Hilton  43779  40946       -2833
21  2703.02                            Lauraville  68088  63929       -4159
22  1304.00             Penn North/Reservoir Hill  32500  30868       -1632
23  2709.03                             Northwood  54607  52083       -2524
24  2503.03              Morrell Park/Violetville  42007  40230       -1777
25  2007.01         Allendale/Irvington/S. Hilton  34556  33592        -964
26  1602.00       Sandtown-Winchester/Harlem Park  25417  24848        -569
27  1505.00                     Greater Mondawmin  34609  33967        -642
28  2501.03              Morrell Park/Violetville  36957  36555        -402
29  1308.05           Mount Washington/Coldspring  53984  53750        -234
30  1513.00                 Southern Park Heights  33579  33866         287
31  2706.00                      Harford/Echodale  66914  67625         711
32  2718.01             Pimlico/Arlington/Hilltop  24802  25278         476
33  2801.01                        Glen-Fallstaff  46576  47610        1034
34   909.00                       Greenmount East  19056  19524         468
35  1507.02                     Greater Mondawmin  48942  50150        1208
36  1504.00                     Greater Mondawmin  32632  33702        1070
37  2710.02                        Greater Govans  38500  40281        1781
38  2719.00                        Glen-Fallstaff  52308  54866        2558
39  2804.01       Beechfield/Ten Hills/West Hills  44954  47192        2238
40   301.00              Harbor East/Little Italy  21932  23083        1151
41  1506.00                      Greater Rosemont  29631  31250        1619
42  1703.00                   Upton/Druid Heights  17892  18912        1020
43  1508.00                  Forest Park/Walbrook  37199  39337        2138
44  2606.04                          Southeastern  20710  21977        1267
45  1001.00                       Greenmount East  28929  30913        1984
46  2701.02                            Lauraville  54250  58020        3770
47  1901.00                   Southwest Baltimore  22893  24559        1666
48  2710.01                        Greater Govans  33203  35822        2619
49  2604.03                   Claremont/Armistead  32373  35282        2909
50  1503.00                      Greater Rosemont  32289  35476        3187
51  2705.01                      Harford/Echodale  59516  66604        7088
52  2804.03       Beechfield/Ten Hills/West Hills  51435  57582        6147
53  2004.00                   Southwest Baltimore  28324  31975        3651
54   907.00                     Midway/Coldstream  27330  30964        3634
55  2005.00                   Southwest Baltimore  30239  34306        4067
56   105.00                           Fells Point  86157  98194       12037
57  2502.03                           Cherry Hill  29747  33902        4155
58  2708.01                            Loch Raven  51415  58995        7580
59  2003.00                   Southwest Baltimore  19063  21953        2890
60   904.00                         The Waverlies  26490  30685        4195
61  2502.04                           Cherry Hill  12384  14349        1965
62  2501.01       Beechfield/Ten Hills/West Hills  52098  60463        8365
63  2720.07                        Glen-Fallstaff  35903  41728        5825
64  2603.02                         Belair-Edison  42727  50000        7273
65  1701.00                   Downtown/Seton Hill  30197  35582        5385
66  2001.00                   Southwest Baltimore  32214  38203        5989
67  2504.02     Brooklyn/Curtis Bay/Hawkins Point  31250  37059        5809
68   905.00                         The Waverlies  36507  43727        7220
69  2709.02                             Northwood  48555  58269        9714
70  1308.03  Medfield/Hampden/Woodberry/Remington  51548  62188       10640
71  2708.02                            Loch Raven  46181  55753        9572
72   701.00                      Madison/East End  37701  45602        7901
73   601.00           Patterson Park North &amp; East  46822  56652        9830
74  1202.02       Greater Charles Village/Barclay  30179  36563        6384
75  1301.00             Penn North/Reservoir Hill  21271  25835        4564
76  1902.00                   Southwest Baltimore  43214  52738        9524
77   902.00                             Northwood  67500  82609       15109
78  2603.01                         Belair-Edison  42347  52117        9770
79  2715.01           Mount Washington/Coldspring  88929 109688       20759
80  2601.02                     Cedonia/Frankford  48783  60313       11530
81  2708.03                            Loch Raven  42234  52272       10038
82  2704.01                              Hamilton  51641  64620       12979
83  2802.00            Howard Park/West Arlington  45047  56458       11411
84  2717.00             Pimlico/Arlington/Hilltop  29069  36484        7415
85  2602.02                     Cedonia/Frankford  31241  39282        8041
86  2805.00                   Oldtown/Middle East  11278  14304        3026
87  2502.06              Morrell Park/Violetville  52674  66900       14226
88  1204.00       Greater Charles Village/Barclay  39375  50034       10659
89  2708.05             Chinquapin Park/Belvedere  46875  59763       12888
90  2718.02             Pimlico/Arlington/Hilltop  31392  40256        8864
91  2801.02            Howard Park/West Arlington  33938  43618        9680
92  1201.00     North Baltimore/Guilford/Homeland  56205  72349       16144
93  1308.04  Medfield/Hampden/Woodberry/Remington  48207  62054       13847
94  1608.01                     Edmondson Village  41549  53543       11994
95  1511.00                  Dorchester/Ashburton  45649  58843       13194
96  2711.01     North Baltimore/Guilford/Homeland  42994  55859       12865
97  2602.01                     Cedonia/Frankford  33936  44093       10157
98  1510.00                  Dorchester/Ashburton  35056  45870       10814
99  2006.00         Allendale/Irvington/S. Hilton  29813  39076        9263
100 2707.01                      Harford/Echodale  28618  37591        8973
101  801.01                         Belair-Edison  49688  65417       15729
102  806.00                       Greenmount East  26726  35221        8495
103 2302.00             Inner Harbor/Federal Hill  80521 107344       26823
104 2720.04               Cross-Country/Cheswolde  49567  66148       16581
105 2606.05                          Southeastern  33545  44794       11249
106 2705.02                              Hamilton  53493  71694       18201
107 2702.00                            Lauraville  60128  80788       20660
108 1303.00             Penn North/Reservoir Hill  32273  43380       11107
109  401.00                   Downtown/Seton Hill  45948  62131       16183
110 2403.00             Inner Harbor/Federal Hill  89211 120729       31518
111  808.00                   Oldtown/Middle East  35532  48137       12605
112 2201.00             Inner Harbor/Federal Hill  59259  80305       21046
113 1607.00                      Greater Rosemont  29472  39959       10487
114 1507.01                     Greater Mondawmin  38125  51944       13819
115  602.00           Patterson Park North &amp; East  51403  70313       18910
116 2720.06                        Glen-Fallstaff  24859  34019        9160
117 1509.00                  Forest Park/Walbrook  37440  51250       13810
118  906.00                     Midway/Coldstream  36408  50048       13640
119 1101.00                               Midtown  38797  53407       14610
120 2608.00                          Highlandtown  35200  48850       13650
121 2707.03                      Harford/Echodale  63521  88750       25229
122 2713.00       Greater Roland Park/Poplar Hill 111250 155605       44355
123 2803.01              Dickeyville/Franklintown  33707  47366       13659
124 2701.01                            Lauraville  57326  80875       23549
125 2602.03                     Cedonia/Frankford  32615  46250       13635
126 1606.00                      Greater Rosemont  27128  38482       11354
127  803.01                         Clifton-Berea  32024  45446       13422
128 1402.00                   Upton/Druid Heights  16213  23152        6939
129 1601.00       Sandtown-Winchester/Harlem Park  19583  27969        8386
130 1608.02                     Edmondson Village  29355  41932       12577
131 1203.00       Greater Charles Village/Barclay  38281  55074       16793
132 1702.00                   Upton/Druid Heights   9412  13559        4147
133 2402.00             Inner Harbor/Federal Hill  92500 133333       40833
134  804.00                         Clifton-Berea  23893  34567       10674
135  903.00                         The Waverlies  43824  63523       19699
136 2708.04             Chinquapin Park/Belvedere  41094  59583       18489
137 2707.02                      Harford/Echodale  39205  56963       17758
138  901.00                        Greater Govans  36444  52988       16544
139 2501.02         Allendale/Irvington/S. Hilton  36960  53854       16894
140 2720.05               Cross-Country/Cheswolde  49757  72500       22743
141 2712.00     North Baltimore/Guilford/Homeland 133548 195353       61805
142 1205.00                               Midtown  37500  55170       17670
143 2601.01                     Cedonia/Frankford  46789  68983       22194
144 2703.01                            Lauraville  54623  80655       26032
145 1501.00       Sandtown-Winchester/Harlem Park  18097  26989        8892
146 1307.00  Medfield/Hampden/Woodberry/Remington  48634  72648       24014
147 1202.01       Greater Charles Village/Barclay  54000  81393       27393
148  604.00                   Oldtown/Middle East  35139  53472       18333
149 2604.04         Orangeville/East Highlandtown  35708  54375       18667
150 2008.00         Allendale/Irvington/S. Hilton  32711  49875       17164
151 2605.01         Orangeville/East Highlandtown  42298  64706       22408
152  302.00              Harbor East/Little Italy  63885  98254       34369
153 1605.00                      Greater Rosemont  24556  37819       13263
154 1206.00       Greater Charles Village/Barclay  23488  36221       12733
155 2714.00       Greater Roland Park/Poplar Hill  97891 151146       53255
156 2604.01                   Claremont/Armistead  31392  48661       17269
157 1207.00  Medfield/Hampden/Woodberry/Remington  39730  61653       21923
158 2101.00            Washington Village/Pigtown  48857  76368       27511
159 2609.00                          Highlandtown  68571 107438       38867
160  603.00           Patterson Park North &amp; East  53813  84318       30505
161 2611.00                          Highlandtown  83207 130769       47562
162 2301.00             Inner Harbor/Federal Hill  62222  98125       35903
163  201.00                           Fells Point  60439  95536       35097
164  802.00                         Clifton-Berea  24200  38289       14089
165 2704.02                              Hamilton  53125  84556       31431
166 2007.02         Allendale/Irvington/S. Hilton  27305  43734       16429
167 1502.00       Sandtown-Winchester/Harlem Park  25224  40644       15420
168  104.00                                Canton  70313 114946       44633
169 2803.02                  Forest Park/Walbrook  33864  56004       22140
170 2610.00           Patterson Park North &amp; East  36343  60893       24550
171 2404.00                       South Baltimore  72122 121685       49563
172  803.02                         Clifton-Berea  24423  41298       16875
173 1803.00 Poppleton/The Terraces/Hollins Market  37879  64125       26246
174  101.00                                Canton  75938 128839       52901
175 1306.00  Medfield/Hampden/Woodberry/Remington  53654  91635       37981
176  203.00                           Fells Point  59236 101815       42579
177 2401.00                       South Baltimore  87619 151659       64040
178 1401.00                               Midtown  32917  57292       24375
179 2303.00                       South Baltimore  53194  92841       39647
180 2502.07                           Cherry Hill  23310  41518       18208
181 1512.00                 Southern Park Heights  12386  22632       10246
182  202.00                           Fells Point  47131  86125       38994
183  704.00                   Oldtown/Middle East  14527  27321       12794
184 1302.00             Penn North/Reservoir Hill  30255  57457       27202
185 1102.00                               Midtown  32563  62703       30140
186 1403.00                   Upton/Druid Heights  21607  41913       20306
187 1002.00                   Oldtown/Middle East   9862  19172        9310
188  103.00                                Canton  77841 151389       73548
189 1308.06  Medfield/Hampden/Woodberry/Remington  48750  95142       46392
190  807.00                       Greenmount East  20679  40885       20206
191 2711.02     North Baltimore/Guilford/Homeland  99300 199531      100231
192 2607.00         Orangeville/East Highlandtown  36901  80000       43099
193  102.00           Patterson Park North &amp; East  58409 130357       71948
194  703.00                      Madison/East End  15000  35000       20000
195  402.00                   Downtown/Seton Hill  13229  43333       30104
196 1003.00                      Unassigned--Jail     NA     NA          NA
197 1801.00 Poppleton/The Terraces/Hollins Market  18429     NA          NA
198 1802.00 Poppleton/The Terraces/Hollins Market  16585     NA          NA
199 2506.00     Brooklyn/Curtis Bay/Hawkins Point     NA     NA          NA
200 2603.03                   Claremont/Armistead  30192     NA          NA
    Diff_Pct_2020
1          -37.36
2          -21.99
3          -21.74
4          -20.85
5          -19.93
6          -19.49
7          -18.89
8          -18.77
9          -17.22
10         -17.18
11         -15.72
12         -12.02
13         -11.90
14          -9.25
15          -9.17
16          -7.72
17          -7.38
18          -6.92
19          -6.76
20          -6.47
21          -6.11
22          -5.02
23          -4.62
24          -4.23
25          -2.79
26          -2.24
27          -1.86
28          -1.09
29          -0.43
30           0.85
31           1.06
32           1.92
33           2.22
34           2.46
35           2.47
36           3.28
37           4.63
38           4.89
39           4.98
40           5.25
41           5.46
42           5.70
43           5.75
44           6.12
45           6.86
46           6.95
47           7.28
48           7.89
49           8.99
50           9.87
51          11.91
52          11.95
53          12.89
54          13.30
55          13.45
56          13.97
57          13.97
58          14.74
59          15.16
60          15.84
61          15.87
62          16.06
63          16.22
64          17.02
65          17.83
66          18.59
67          18.59
68          19.78
69          20.01
70          20.64
71          20.73
72          20.96
73          20.99
74          21.15
75          21.46
76          22.04
77          22.38
78          23.07
79          23.34
80          23.64
81          23.77
82          25.13
83          25.33
84          25.51
85          25.74
86          26.83
87          27.01
88          27.07
89          27.49
90          28.24
91          28.52
92          28.72
93          28.72
94          28.87
95          28.90
96          29.92
97          29.93
98          30.85
99          31.07
100         31.35
101         31.66
102         31.79
103         33.31
104         33.45
105         33.53
106         34.03
107         34.36
108         34.42
109         35.22
110         35.33
111         35.48
112         35.52
113         35.58
114         36.25
115         36.79
116         36.85
117         36.89
118         37.46
119         37.66
120         38.78
121         39.72
122         39.87
123         40.52
124         41.08
125         41.81
126         41.85
127         41.91
128         42.80
129         42.82
130         42.84
131         43.87
132         44.06
133         44.14
134         44.67
135         44.95
136         44.99
137         45.30
138         45.40
139         45.71
140         45.71
141         46.28
142         47.12
143         47.43
144         47.66
145         49.14
146         49.38
147         50.73
148         52.17
149         52.28
150         52.47
151         52.98
152         53.80
153         54.01
154         54.21
155         54.40
156         55.01
157         55.18
158         56.31
159         56.68
160         56.69
161         57.16
162         57.70
163         58.07
164         58.22
165         59.16
166         60.17
167         61.13
168         63.48
169         65.38
170         67.55
171         68.72
172         69.09
173         69.29
174         69.66
175         70.79
176         71.88
177         73.09
178         74.05
179         74.53
180         78.11
181         82.72
182         82.74
183         88.07
184         89.91
185         92.56
186         93.98
187         94.40
188         94.48
189         95.16
190         97.71
191        100.94
192        116.80
193        123.18
194        133.33
195        227.56
196            NA
197            NA
198            NA
199            NA
200            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baltcity_income) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Neighborhood x2010  x2016  x2020 Census       GEOID
1                      Canton 75938 100985 128839    101 24510010100
2 Patterson Park North &amp; East 58409  96171 130357    102 24510010200
3                      Canton 77841 116875 151389    103 24510010300
4                      Canton 70313  97153 114946    104 24510010400
5                 Fells Point 86157  85986  98194    105 24510010500
6                 Fells Point 60439  79063  95536    201 24510020100</code></pre>
</div>
</div>
<section id="using-mutate-to-clean-data" class="level3" data-number="15.0.1">
<h3 data-number="15.0.1" class="anchored" data-anchor-id="using-mutate-to-clean-data"><span class="header-section-number">15.0.1</span> Using mutate to clean data</h3>
<p>For this example, we’ll examine a dataset of loans small businesses obtained to stay afloat during the Covid-19 pandemic. It’s called the PPP loan database which stands for Paycheck Protection Program loans.</p>
<p>Take a look at the <code>city</code> column in our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View(maryland_ppp)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You’ll notice that there’s a mix of styles: “Baltimore” and “BALTIMORE” for example. R will think those are two different cities, and that will mean that any aggregates we create based on city won’t be accurate.</p>
<p>So how can we fix that? Mutate is not just for math! And a function called <code>str_to_upper</code> that will convert a character column into all uppercase.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>maryland_ppp <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper_city =</span> <span class="fu">str_to_upper</span>(city)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(city, upper_city, name, amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 195,869 × 4
   city             upper_city       name                                 amount
   &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;                                 &lt;dbl&gt;
 1 Columbia         COLUMBIA         BAYWOOD HOTELS INC.                  2   e6
 2 Lanham           LANHAM           PARTNERS ELECTRIC SERVICE INC.       1.09e6
 3 Bethesda         BETHESDA         RP3 LLC                              7.88e5
 4 Chevy Chase      CHEVY CHASE      SUSHI KO CHEVY CHASE LLC.            6.56e5
 5 Capitol Heights  CAPITOL HEIGHTS  VILLAGE ACADEMY OF MARYLAND          4.70e5
 6 Brentwood        BRENTWOOD        GOSHEN HOUSE TRADING LLC             3.46e5
 7 Tracys Landing   TRACYS LANDING   WEAVER BOAT WORKS                    3.31e5
 8 Essex            ESSEX            BOBS OVERHEAD DOOR REPAIR AND SERVI… 3.18e5
 9 Annapolis        ANNAPOLIS        PARENTS FOR MONTESSORI EDUCATION INC 2.84e5
10 Prince Frederick PRINCE FREDERICK HARVEST PRINCE FREDERICK LLC         2.42e5
# … with 195,859 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(maryland_ppp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  name                            amount city            servicing_lender_state
  &lt;chr&gt;                            &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;                 
1 BAYWOOD HOTELS INC.            2000000 Columbia        MD                    
2 PARTNERS ELECTRIC SERVICE INC. 1086257 Lanham          NY                    
3 RP3 LLC                         787500 Bethesda        VA                    
4 SUSHI KO CHEVY CHASE LLC.       655732 Chevy Chase     NY                    
5 VILLAGE ACADEMY OF MARYLAND     469800 Capitol Heights WV                    
6 GOSHEN HOUSE TRADING LLC        346500 Brentwood       NJ                    </code></pre>
</div>
</div>
<p>Notice we kept the original data in <code>city</code> and transformed it in a new column, <code>upper_city</code>. Always a good practice to keep your original data intact in case you make a coding mistake or need to change the original for reference.</p>
<p>We could do the same thing with the <code>address</code> column in order to standardize that for analysis, too.</p>
<p>Think of how easy this is compared to a similar data cleaning lesson in Google Sheets.</p>
</section>
<section id="a-more-powerful-use" class="level3" data-number="15.0.2">
<h3 data-number="15.0.2" class="anchored" data-anchor-id="a-more-powerful-use"><span class="header-section-number">15.0.2</span> A more powerful use</h3>
<p>Mutate is even more useful when combined with some additional functions. Let’s say you want to know if the servicing lender is located in Maryland or outside the state. There are three possible answers:</p>
<ol type="1">
<li>The lender is in Maryland</li>
<li>The lender is outside Maryland</li>
<li>The data doesn’t tell us (<code>servicing_lender_state</code> is blank or NA)</li>
</ol>
<p>We can create a new column that accounts for these possibilities and populate it using mutate and <code>case_when</code>, which is like an if/else statement but for more than two options.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>maryland_with_in_out <span class="ot">&lt;-</span> maryland_ppp <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">in_out =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>        servicing_lender_state <span class="sc">==</span> <span class="st">'NA'</span> <span class="sc">~</span> <span class="st">"NA"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>        servicing_lender_state <span class="sc">==</span> <span class="st">'MD'</span> <span class="sc">~</span> <span class="st">"IN"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        servicing_lender_state <span class="sc">!=</span> <span class="st">'MD'</span> <span class="sc">~</span> <span class="st">"OUT"</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>maryland_with_in_out <span class="sc">%&gt;%</span> </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, amount, servicing_lender_state, in_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 195,869 × 4
   name                                        amount servicing_lender_…¹ in_out
   &lt;chr&gt;                                        &lt;dbl&gt; &lt;chr&gt;               &lt;chr&gt; 
 1 BAYWOOD HOTELS INC.                       2000000  MD                  IN    
 2 PARTNERS ELECTRIC SERVICE INC.            1086257  NY                  OUT   
 3 RP3 LLC                                    787500  VA                  OUT   
 4 SUSHI KO CHEVY CHASE LLC.                  655732  NY                  OUT   
 5 VILLAGE ACADEMY OF MARYLAND                469800  WV                  OUT   
 6 GOSHEN HOUSE TRADING LLC                   346500  NJ                  OUT   
 7 WEAVER BOAT WORKS                          330700  MD                  IN    
 8 BOBS OVERHEAD DOOR REPAIR AND SERVICE INC  317504  MD                  IN    
 9 PARENTS FOR MONTESSORI EDUCATION INC       284185  MD                  IN    
10 HARVEST PRINCE FREDERICK LLC               242094. MO                  OUT   
# … with 195,859 more rows, and abbreviated variable name
#   ¹​servicing_lender_state</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(maryland_with_in_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  name                            amount city            servicing_lend…¹ in_out
  &lt;chr&gt;                            &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt; 
1 BAYWOOD HOTELS INC.            2000000 Columbia        MD               IN    
2 PARTNERS ELECTRIC SERVICE INC. 1086257 Lanham          NY               OUT   
3 RP3 LLC                         787500 Bethesda        VA               OUT   
4 SUSHI KO CHEVY CHASE LLC.       655732 Chevy Chase     NY               OUT   
5 VILLAGE ACADEMY OF MARYLAND     469800 Capitol Heights WV               OUT   
6 GOSHEN HOUSE TRADING LLC        346500 Brentwood       NJ               OUT   
# … with abbreviated variable name ¹​servicing_lender_state</code></pre>
</div>
</div>
<p>We can then use our new <code>in_out</code> column in group_by statements to make summarizing easier.</p>
<p>In this case there are no Maryland loans where <code>servicing_lender_state</code> has a value of ‘NA’, but you should never assume that will be the case for a dataset. If you know that the only options are the lender is in Maryland or is outside it, you can rewrite the previous code as an if/else statement:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>maryland_with_in_out <span class="ot">&lt;-</span> maryland_ppp <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">in_out =</span> <span class="fu">if_else</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        servicing_lender_state <span class="sc">==</span> <span class="st">'MD'</span>, <span class="st">"IN"</span>, <span class="st">"OUT"</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>maryland_with_in_out <span class="sc">%&gt;%</span> </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, amount, servicing_lender_state, in_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 195,869 × 4
   name                                        amount servicing_lender_…¹ in_out
   &lt;chr&gt;                                        &lt;dbl&gt; &lt;chr&gt;               &lt;chr&gt; 
 1 BAYWOOD HOTELS INC.                       2000000  MD                  IN    
 2 PARTNERS ELECTRIC SERVICE INC.            1086257  NY                  OUT   
 3 RP3 LLC                                    787500  VA                  OUT   
 4 SUSHI KO CHEVY CHASE LLC.                  655732  NY                  OUT   
 5 VILLAGE ACADEMY OF MARYLAND                469800  WV                  OUT   
 6 GOSHEN HOUSE TRADING LLC                   346500  NJ                  OUT   
 7 WEAVER BOAT WORKS                          330700  MD                  IN    
 8 BOBS OVERHEAD DOOR REPAIR AND SERVICE INC  317504  MD                  IN    
 9 PARENTS FOR MONTESSORI EDUCATION INC       284185  MD                  IN    
10 HARVEST PRINCE FREDERICK LLC               242094. MO                  OUT   
# … with 195,859 more rows, and abbreviated variable name
#   ¹​servicing_lender_state</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>maryland_with_in_out</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 195,869 × 5
   name                                        amount city        servi…¹ in_out
   &lt;chr&gt;                                        &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; 
 1 BAYWOOD HOTELS INC.                       2000000  Columbia    MD      IN    
 2 PARTNERS ELECTRIC SERVICE INC.            1086257  Lanham      NY      OUT   
 3 RP3 LLC                                    787500  Bethesda    VA      OUT   
 4 SUSHI KO CHEVY CHASE LLC.                  655732  Chevy Chase NY      OUT   
 5 VILLAGE ACADEMY OF MARYLAND                469800  Capitol He… WV      OUT   
 6 GOSHEN HOUSE TRADING LLC                   346500  Brentwood   NJ      OUT   
 7 WEAVER BOAT WORKS                          330700  Tracys Lan… MD      IN    
 8 BOBS OVERHEAD DOOR REPAIR AND SERVICE INC  317504  Essex       MD      IN    
 9 PARENTS FOR MONTESSORI EDUCATION INC       284185  Annapolis   MD      IN    
10 HARVEST PRINCE FREDERICK LLC               242094. Prince Fre… MO      OUT   
# … with 195,859 more rows, and abbreviated variable name
#   ¹​servicing_lender_state</code></pre>
</div>
</div>
<p>Mutate is an essential tool to make your data more useful and allows you to ask more questions.</p>
</section>
<section id="pre-lab-questions" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Pre-Lab Questions:</h1>
<p>Based on the skills you have learned above, use this <a href="%22assets/data/city_md_income.csv%22">dataset of Maryland cities ‘assets/data/city_md_income.csv’</a> (it is included in your prelab folder)</p>
<p>And answer the following questions:</p>
<p><strong>Question #1: </strong></p>
<ol type="1">
<li>Calculate the difference in median income from 2010 to 2020 for all places listed. Calculate the percentage change.</li>
</ol>
<div class="cell">

</div>
<p>Which city had the highest absolute change? Which had the highest percentage change?</p>
<div class="cell">

</div>
<p>Produce a table with the top 25 places ranked by the highest percentage change.</p>
<div class="cell">

</div>
<p>Produce a second table with the top 25 places ranked by the lowest or negative percentage change.</p>
<div class="cell">

</div>
<p><strong>Question #2: </strong> Answer this question in English: Write in Elms</p>
<ol start="2" type="1">
<li>Building on the previous lesson on filtering, describe how you would determine the median value of the percentage change and produce a table with the 10 neighborhoods with the highest change and the 10 with the lowest change.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./r_aggregates_filters.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Mutuating, Aggregates, Filters</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./r_visualizing_reporting.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Visualizing your data for reporting</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>